---
ticket: PROD-28327
title: Analyse du D√©s√©quilibre 4510/7000 et Impact GLI/Honoraires
status: en_cours
domain: gl
tags: [caf, lettrage, pdata, comptabilite, 4510, 7000]
assignee: BECKER Sebastien
created: 2025-11-24
updated: 2025-12-01
---

# PROD-28327 - Analyse du Desequilibre 4510/7000 et Impact GLI/Honoraires

## Contexte du Ticket

**Jira**: [PROD-28327](https://fonciamillenium.atlassian.net/browse/PROD-28327)
**Status**: En cours
**Assignee**: BECKER Sebastien
**Cabinet**: Tous
**Module**: GL / GLI

## Problematique

### Description du probleme

Lors du quittancement d'un locataire :
1. **Quittancement** : Debit 4510 / Credit 7000
2. **Encaissement** (cheque, virements, prelevements, CAF) : Credit 4510 / Debit Banque
3. **Lettrage** (en parallele) : Debit 7000 / Credit compte destinataire (ex: 4500 pour loyers, 4621 pour honoraires)

**Constat** : Lors de l'encaissement CAF, le jeu de lettrage ne se fait pas systematiquement.

### Impacts Business

1. **Avances GLI** versees a tort aux bailleurs (impact tresorerie)
2. **Honoraires** reduits (assiette de calcul = loyers encaisses plus faible)
3. **ADRF** : loyers consideres comme non recus
4. **Ecarts** entre comptes 4510 et 7000

---

## Analyse Technique

### 1. Process de Quittancement Locataire (Verifie dans le code)

**Fichier** : `applications/plato/src/routes/accounting/rentalManagement/lease/lease.accountingEntry.typed.ts`

Le quittancement genere des ecritures comptables via `generateTenantAccountingLines()` :

```
Pour chaque variable positive du RentDetailsCall:
- Debit 4510 (compte locataire) : montant TTC
- Credit 7000 (compte produits) : montant TTC

ProcessCode: RENT_CALL
JournalCode: QTAN
```

**Logique** :
- Somme des variables TTC positives du quittancement
- Creation du couple debit 4510 / credit 7000
- Equilibre comptable obligatoire

### 2. Process d'Encaissement CAF

**Fichier** : `applications/plato/src/routes/accounting/rentalManagement/caf/income/income.process.js`

#### Etape 1 : Lecture du fichier CAF (`cafFiles.process.js`)

Le fichier CAF contient :
- **cafTransfers** : liste des versements (positifs et negatifs/retenues)
- **amount** : somme TOTALE des lignes (voir `_mappingEnregistrementsTotal`)

**Point critique** : Le fichier CAF peut contenir des montants negatifs (retenues).

#### Etape 2 : Rapprochement bancaire

```javascript
// income.process.js - getCafFile()
export function getPositiveCafAmount(cafFile) {
  return sumOfAmounts(
    cafFile.cafTransfers
      .filter(({ amount }) => amount.value > 0) // <-- EXCLUSION DES NEGATIFS
      .map((recipient) => recipient.amount),
  );
}
```

**ATTENTION** : Lors du rapprochement, seuls les montants **positifs** sont pris en compte pour matcher avec les virements bancaires.

**Raison probable** : Le montant du virement bancaire recu correspond a la somme nette (positifs - negatifs), mais le fichier CAF contient les deux separement.

#### Etape 3 : Assignation aux baux et Lettrage

```javascript
// income.process.js - assignToLeases()
await assignToLease(cafTransfer._id, {
  accountingLine: {
    journalCode: journalCode.BQCAF,
  },
  letteringAsync: true,  // <-- LETTRAGE ASYNCHRONE
});
```

Le lettrage est effectue de maniere **asynchrone** via un message broker `caf-lettering`.

### 3. Le PDATA de Rattrapage `letter-caf-payments.ts`

**Fichier** : `applications/plato/scripts/pdata/reusables/letter-caf-payments.ts`

```typescript
async function main() {
  const cafTransferIds = await CafTransferModel.distinct("_id", {
    kind: "CafTransfer",
    direction: "ENTRANT",
    lineOfBusiness: "G",
    "beneficiaries.kind": "Lease",
    "beneficiaries.letteringStatus": "TO_DO",
    status: "PROCESSED",
  });

  for (const id of cafTransferIds) {
    await letterPayment(new ObjectId(id), {
      letteringAsync: true,
      user: new ObjectId("620263cdaf4638044a7da2da"),
    });
  }
}
```

#### Historique Git du Filtre

**Commit `760c0bf5377`** (24 Nov 2025) - Message: "feat: original filter excluded partially processed CafTransfers"

Le filtre suivant a ete **RETIRE** :

```typescript
// ANCIEN FILTRE (retire)
beneficiaries: {
  $not: {
    $elemMatch: {
      letteringStatus: "DONE",
    },
  },
},
```

**Raison du retrait** : Ce filtre excluait les CafTransfers partiellement traites (certains beneficiaires DONE, d'autres TO_DO). En le retirant, on peut maintenant traiter les CafTransfers meme si certains beneficiaires sont deja lettres.

---

## Pourquoi le Lettrage CAF ne se Fait Pas ?

### Hypotheses / Scenarios

1. **Lettrage Asynchrone Echoue**
   - Le message `caf-lettering` est envoye mais peut echouer silencieusement
   - Le worker peut etre sature lors des pics de volume (debut de mois)

2. **Beneficiaires non trouves**
   - Si le `codeCAF` ne matche pas un locataire, le versement va en RNI (4726)
   - Ces montants ne sont pas lettres sur les baux

3. **Exclusion des CafTransfers partiellement traites** (CORRIGE)
   - L'ancien filtre excluait les CafTransfers ayant AU MOINS UN beneficiaire DONE
   - Cela empechait le rattrapage des beneficiaires TO_DO restants

4. **Timing / Race Condition**
   - Le lettrage asynchrone peut echouer si le CafTransfer n'est pas encore PROCESSED
   - Le PDATA ne cible que les `status: "PROCESSED"`

5. **Montants negatifs exclus**
   - Les retenues CAF (montants negatifs) ne sont pas traitees pour le lettrage
   - Cela peut creer des ecarts si le locataire avait un trop-percu

---

## Process de Lettrage - Fichier `lease.ts`

**Fichier** : `applications/plato/src/services/accounting/lettering/lease.ts`

### letterPayment()

```typescript
export async function letterPayment(mediaPaymentId, options) {
  const mediaPayment = await getMediaPayment(mediaPaymentId);

  // Filtre beneficiaires de type Lease
  const beneficiaries = mediaPayment.beneficiaries.filter(
    (beneficiary) =>
      beneficiary.kind === LEASE && beneficiary.target
  );

  for (const beneficiary of beneficiaries) {
    if (opts.letteringAsync) {
      // Envoi message asynchrone
      await messageBroker.sendMessage("caf-lettering", {...});
    } else {
      // Lettrage synchrone
      await letterPaymentBeneficiary(...);
    }
  }
}
```

### letterPaymentBeneficiary()

1. Verifie que `letteringStatus === "TO_DO"`
2. Met le status a `"IN_PROGRESS"`
3. Appelle `letterAmount()` pour creer les ecritures
4. Met le status a `"DONE"`

### letterAmount()

Cree les ecritures de lettrage :
- **Debit 7000** : montant encaisse
- **Credit compte variable** (4500, 4621, etc.) : montant lettre sur chaque variable
- **Credit 4700 (RNA)** : reste eventuel si pas assez de variables a lettrer

---

## Exclusion des CAF Negatifs - Bug ou Feature ?

**Localisation** : `income.process.js` ligne 88-93

```javascript
export function getPositiveCafAmount(cafFile) {
  return sumOfAmounts(
    cafFile.cafTransfers
      .filter(({ amount }) => amount.value > 0)  // Exclusion negatifs
      .map((recipient) => recipient.amount),
  );
}
```

### Analyse

**C'est une FEATURE, pas un bug** pour le rapprochement bancaire :
- Le virement bancaire recu = somme nette (positifs - negatifs)
- Le fichier CAF contient les lignes detaillees (positifs ET negatifs separes)
- Pour matcher le virement avec le fichier, on compare `virement = somme(positifs)`

**MAIS** : Cela peut creer des ecarts 4510/7000 car :
- Les retenues ne sont pas lettrees (pas de beneficiaire cree)
- Si la retenue compense un trop-percu, l'ecriture 4510/7000 reste desequilibree

---

## Plan d'Action

### 1. Verification du PDATA

Le PDATA `letter-caf-payments.ts` :
- **Perimetre** : Tous les CafTransfers ENTRANTS en status PROCESSED avec au moins un beneficiaire Lease en TO_DO
- **Action** : Appelle `letterPayment()` pour chaque CafTransfer
- **Mode** : Asynchrone (`letteringAsync: true`)
- **Periode** : Execution mensuelle du 5 au 13

**Efficacite** : Apres le retrait du filtre restrictif (commit 760c0bf), le PDATA devrait maintenant traiter correctement les CafTransfers partiellement traites.

### 2. Regularisation des Ecarts

**Actions necessaires** :
1. Identifier les CafTransfers avec beneficiaires en TO_DO
2. Relancer le lettrage pour ces CafTransfers
3. Pour les ecarts historiques, creer un PDATA de correction

### 3. PDATA de Correction a Creer

```typescript
// Proposition de PDATA pour fixer les ecarts 4510/7000
// A partir du fichier Excel fourni

// 1. Identifier les baux concernes depuis le fichier Excel
// 2. Pour chaque bail :
//    - Verifier les CafTransfers associes
//    - Identifier les variables non lettrees
//    - Forcer le lettrage si possible
//    - Sinon, creer une ecriture de regularisation
```

---

## Fichier Excel des Ecarts

**Chemin** : `/Users/frx33355/Downloads/ECARTS 4510 - 7000 (1).xlsx`

### Requete Snowflake utilisee

```sql
SELECT
    A.office_name AS CABINET,
    L.lessor_number AS BAILLEUR,
    SUM(a4510.computed_balance:value::number) / 100 AS TOTAL_4510,
    MAX(a7000.computed_balance:value::number) / 100 AS TOTAL_7000,
    (SUM(a4510.computed_balance:value::number) + MAX(a7000.computed_balance:value::number)) / 100 AS DIFFERENCE
FROM datalake_ml_prod.plato.accounting_accounts AS a4510
JOIN datalake_ml_prod.plato.accounting_accounts AS a7000
    ON a4510.lessor_account = a7000.lessor_account
JOIN datalake_ml_prod.plato.lessor_accounts AS L
    ON a7000.lessor_account = L._id
JOIN datalake_ml_prod.plato.agencies AS A
    ON a7000.agency = A._id
WHERE a4510.accounting_class = '4510'
  AND a7000.accounting_class = '7000'
GROUP BY A.office_name, L.lessor_number
HAVING (SUM(a4510.computed_balance:value::number) + MAX(a7000.computed_balance:value::number)) <> 0
ORDER BY DIFFERENCE DESC;
```

---

## Reponses aux Questions du Ticket

### 1. Verification du Fonctionnement du PDATA

**Execution** : Le PDATA s'execute correctement (pas d'erreur technique)

**Efficacite** :
- AVANT le fix (commit 760c0bf) : Le PDATA excluait les CafTransfers partiellement traites
- APRES le fix : Le PDATA traite maintenant tous les CafTransfers avec au moins un beneficiaire TO_DO

**Actions effectuees** :
1. Recherche des CafTransfers ENTRANTS, PROCESSED, avec beneficiaires Lease en TO_DO
2. Pour chaque CafTransfer, appel de `letterPayment()` en mode asynchrone
3. Envoi d'un message `caf-lettering` pour chaque beneficiaire a lettrer

**Periode de rattrapage** : Pas de limite de date - traite tous les CafTransfers correspondant aux criteres

### 2. Regularisation des Lettrages Non Effectues

**Approche recommandee** :

1. **Court terme** : Relancer le PDATA `letter-caf-payments.ts` pour traiter les CafTransfers restants

2. **Moyen terme** : Creer un PDATA specifique pour les ecarts du fichier Excel :
   - Parser le fichier Excel
   - Pour chaque bailleur avec ecart, identifier les baux concernes
   - Verifier les CafTransfers et forcer le lettrage

3. **Long terme** :
   - Monitorer les messages `caf-lettering` qui echouent
   - Ajouter des alertes sur les ecarts 4510/7000

---

## Notes de Session

- **Date** : 24 Nov 2025
- **Commit important** : `760c0bf5377` - Retrait du filtre restrictif sur letteringStatus: DONE
- **Lien PROD-28294** : Ticket connexe sur un fichier CAF annule puis retraite

---

## PDATA de Correction Cree

### Fichier : `applications/plato/scripts/pdata/2025-11/PROD-28327.ts`

Un PDATA de correction a ete cree pour traiter les ecarts 4510/7000 :

```typescript
// Mode DRY_RUN par defaut (mettre a false pour executer)
const DRY_RUN = true;

// Fonctionnalites :
// 1. analyzeGaps() - Identifie tous les CafTransfers avec beneficiaires en TO_DO
// 2. fixLettering() - Force le lettrage SYNCHRONE (pas asynchrone)
// 3. Rapport detaille par agence avec montants

// Requete de recherche :
const cafTransfersWithUnletteredBeneficiaries = await CafTransferModel.find({
  kind: "CafTransfer",
  direction: "ENTRANT",
  lineOfBusiness: "G",
  status: "PROCESSED",
  "beneficiaries.kind": "Lease",
  "beneficiaries.letteringStatus": "TO_DO",
});
```

### Differences avec le PDATA reusable `letter-caf-payments.ts`

| Aspect | `letter-caf-payments.ts` | `PROD-28327.ts` |
|--------|--------------------------|-----------------|
| Mode | Production reguliere | One-shot correction |
| Lettrage | Asynchrone (`letteringAsync: true`) | Synchrone (`letteringAsync: false`) |
| Rapport | Minimal (logs) | Detaille par agence avec montants |
| DRY_RUN | Non | Oui (par defaut) |
| Erreurs | Non capturees | Capturees et rapportees |

### Utilisation

```bash
# 1. Mode analyse (DRY_RUN = true)
npx ts-node scripts/pdata/2025-11/PROD-28327.ts

# 2. Mode execution (apres avoir mis DRY_RUN = false)
npx ts-node scripts/pdata/2025-11/PROD-28327.ts
```

---

## Ex√©cution des PDATA

**üìã Voir le fichier de commandes** : [PROD-28327_COMMANDES.md](./PROD-28327_COMMANDES.md)

---

## TODO

- [x] Creer le PDATA de correction (`PROD-28327.ts`)
- [x] Corriger le PDATA reusable avec pagination (`letter-caf-payments.ts`)
- [x] Corriger le bug du filtre MongoDB ($elemMatch)
- [x] Creer le script d'analyse des ecarts 7000 (`analyze-7000-gaps.ts`)
- [x] Analyser l'origine de ORIGINE_INCONNUE
- [x] Verifier les ecarts pour FONCIA BRETAGNE
- [x] Ajouter parametre `includeCancelled` au script reusable (01 Dec 2025)
- [ ] Executer le PDATA en mode DRY_RUN pour voir le rapport
- [ ] Valider le rapport avec le business
- [ ] Executer le PDATA en mode reel (DRY_RUN = false)
- [ ] Verifier que les ecarts sont corriges
- [ ] Monitorer les messages `caf-lettering` qui echouent (long terme)

---

## üìù R√âSUM√â SIMPLE - Session du 25 Nov 2025

### Probl√®me Initial

**√âcart comptable 4510/7000** sur l'agence FONCIA BRETAGNE (fonciaLogin: 0709) malgr√© l'ex√©cution du PDATA de lettrage CAF.

### üêõ Bug Critique D√©couvert et Corrig√©

**Fichier** : `letter-caf-payments.ts`

**Probl√®me** : Le filtre MongoDB ne marchait pas correctement.

```typescript
// ‚ùå AVANT (MAUVAIS) - trouvait 47 CafTransfers
{
  "beneficiaries.kind": "Lease",
  "beneficiaries.letteringStatus": "TO_DO"
}
// Ce filtre matchait si UN b√©n√©ficiaire √©tait Lease ET UN AUTRE √©tait TO_DO
// (pas forc√©ment le m√™me !)

// ‚úÖ APR√àS (BON) - trouve 0 CafTransfers actuellement
{
  beneficiaries: {
    $elemMatch: {
      kind: BENEFICIARY_KIND.LEASE,
      letteringStatus: mediaPaymentLetteringStatus.TO_DO,
    },
  },
}
// Ce filtre matche uniquement si LE M√äME b√©n√©ficiaire est Lease ET TO_DO
```

**Impact** : Le script traitait 47 faux positifs au lieu du vrai CafTransfer probl√©matique.

### üìä Analyse FONCIA BRETAGNE

**√âcart actuel** : 15‚Ç¨ seulement (au lieu de 2,421‚Ç¨ initial)

#### Comptes Comptables

```
Compte 4510 (locataires) :  1,326,924.67‚Ç¨
Compte 7000 (produits)   : -1,326,909.67‚Ç¨
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
√âcart                    :         15.00‚Ç¨
```

#### √âcritures Non Lettr√©es (NONE) sur le Compte 7000

**Total** : 621,279 √©critures non lettr√©es

**R√©partition par ProcessCode** :

| ProcessCode | Nombre | Pourcentage |
|-------------|--------|-------------|
| `null` (vide) | 329,643 | 53% |
| `ORIGINE_INCONNUE` | 244,915 | 39% |
| `RENT_CALL` | 37,420 | 6% |
| Autres | 9,301 | 2% |

#### Bailleurs avec Gros √âcarts

**196 bailleurs** ont des √©carts > 1000‚Ç¨ en valeur absolue.

**Top 3** :
1. Bailleur 200354655 : -48,600.78‚Ç¨
2. Bailleur 200480920 : -41,200.52‚Ç¨
3. Bailleur 200470330 : -39,800.25‚Ç¨

**Mais** : Ces √©carts se compensent alg√©briquement pour donner seulement 15‚Ç¨ au total.

### üîç Explication ORIGINE_INCONNUE

**C'est quoi ?** : C'est le `processCode` par d√©faut assign√© automatiquement.

**Fichier** : `/packages/accounting/src/constants/accounting-process-code.mts`

```typescript
export const AccountingProcessCode = {
  // ...
  DEFAULT: "ORIGINE_INCONNUE",  // ‚Üê Valeur par d√©faut
  // ...
} as const;
```

**Quand est-il utilis√© ?**

1. **Migration de donn√©es** : √âcritures import√©es depuis l'ancien syst√®me sans processCode
2. **Code legacy** : √âcritures cr√©√©es avant la mise en place du syst√®me de processCode (avant 2020-2021)
3. **Imports manuels** : CSV ou scripts sans processCode fourni

**Pourquoi c'est un probl√®me ?**
- ‚ùå Pas de contexte m√©tier (impossible de savoir quel processus a cr√©√© l'√©criture)
- ‚ùå Pas de lettrage automatique possible
- ‚ùå Pas de tra√ßabilit√© pour l'audit

### üõ†Ô∏è Scripts Cr√©√©s/Am√©lior√©s

#### 1. `letter-caf-payments.ts` (Reusable PDATA)

**Am√©liorations** :
- ‚úÖ Filtre MongoDB corrig√© avec `$elemMatch`
- ‚úÖ Pagination avec cursor Mongoose
- ‚úÖ Utilisation des enums au lieu de strings hardcod√©s
- ‚úÖ Logging par batch (tous les 100)
- ‚úÖ Lookup d'agence correct (AgencyModel au lieu de AssociateModel)

**Utilisation** :
```bash
pnpm nx run plato:pdata-runner scripts/reusablePdata/letter-caf-payments.ts
```

**Param√®tres** :
- `fonciaLogin` : Login agence (ex: "0709") - optionnel
- `periodMonths` : P√©riode de rattrapage en mois (d√©faut: 6)

#### 2. `analyze-7000-gaps.ts` (Script d'Analyse)

**Nouveau script** transform√© en `ReusableScript` pattern.

**Utilisation** :
```bash
pnpm nx run plato:pdata-runner scripts/pdata/2025-11/analyze-7000-gaps.ts
```

**Param√®tres** :
- `fonciaLogin` : Login agence (ex: "0709")
- `minGapAmount` : Montant minimum en ‚Ç¨ (d√©faut: 1000)

**Ce qu'il fait** :
1. Identifie les bailleurs avec √©carts > montant minimum
2. Analyse les √©critures NONE pour chaque bailleur
3. Identifie les top 5 processCode par bailleur
4. G√©n√®re un rapport d√©taill√© avec recommandations

### ‚úÖ Conclusion

1. **Le script CAF fonctionne maintenant correctement** gr√¢ce au fix du filtre `$elemMatch`
2. **L'√©cart de 15‚Ç¨** est normal et provient de situations historiques/exceptionnelles
3. **Les 244,915 √©critures ORIGINE_INCONNUE** sont des donn√©es de migration qu'il faudra traiter √† part
4. **Les 196 bailleurs avec gros √©carts** se compensent entre eux (total = 15‚Ç¨)

### üéØ Actions Recommand√©es

**Court terme** :
- ‚úÖ Bug du filtre corrig√©
- ‚úÖ Script d'analyse cr√©√©
- ‚è≥ Accepter l'√©cart de 15‚Ç¨ comme normal

**Moyen terme** :
- Cr√©er un PDATA pour analyser et cat√©goriser les √©critures `ORIGINE_INCONNUE`
- Identifier si certaines peuvent √™tre lettr√©es manuellement

**Long terme** :
- Monitorer les messages `caf-lettering` qui √©chouent
- Cr√©er des √©critures de r√©gularisation pour solder les comptes historiques

---

## üìù UPDATE - Session du 28 Nov 2025

### Nouveau Cas D√©couvert : CafTransfers CANCELLED

**Probl√®me identifi√©** : Il faut aussi traiter dans le ML-Admin les CafTransfers avec statut **CANCELLED** dont les b√©n√©ficiaires ne sont pas lettr√©s.

**Explication technique** :
- Lors de l'annulation d'un CafTransfer, une √©criture **4510** (compte locataire) a √©t√© cr√©√©e
- Mais l'√©criture **7000** (produits) correspondante n'a pas √©t√© g√©n√©r√©e
- **R√©sultat** : √âcart comptable entre 4510 et 7000

**Solution** : Le PDATA `PROD-28327.ts` doit maintenant inclure les statuts CANCELLED en plus de PROCESSED :

```typescript
status: MEDIA_PAYMENT_STATUS.CANCELLED
// ou pour traiter les deux :
// status: { $in: [MEDIA_PAYMENT_STATUS.PROCESSED, MEDIA_PAYMENT_STATUS.CANCELLED] }
```

**Crit√®res de s√©lection** :
- `status: CANCELLED`
- `beneficiaries.letteringStatus: TO_DO`
- `beneficiaries.kind: LEASE`

### Mise √† jour du Script Reusable

Le script `letter-caf-payments.ts` a √©t√© mis √† jour pour inclure les CANCELLED dans le filtre :

```typescript
status: {
  $in: [MEDIA_PAYMENT_STATUS.PROCESSED, MEDIA_PAYMENT_STATUS.CANCELLED],
}
```

---

## üìù UPDATE - Session du 01 Dec 2025

### Nouveau Param√®tre `includeCancelled` ajout√© au script

**Fichier** : `applications/plato/scripts/reusablePdata/letter-caf-payments.ts`

**Modification** : Ajout d'un param√®tre optionnel `includeCancelled` (d√©faut: `false`) pour permettre de traiter aussi les CafTransfers avec statut CANCELLED.

**Comportement** :
```typescript
// Si includeCancelled = false (d√©faut)
status: MEDIA_PAYMENT_STATUS.PROCESSED

// Si includeCancelled = true
status: { $in: [MEDIA_PAYMENT_STATUS.PROCESSED, MEDIA_PAYMENT_STATUS.CANCELLED] }
```

**Dans le ML-Admin** :
- **Label** : "Inclure les CafTransfers annul√©s"
- **Description** : "Si activ√©, traite √©galement les CafTransfers avec statut CANCELLED (en plus de PROCESSED). Utile pour corriger les √©carts 4510/7000 li√©s √† des annulations."

**Cas d'usage** : Lors de l'annulation d'un CafTransfer, une √©criture 4510 a √©t√© cr√©√©e mais pas l'√©criture 7000 correspondante. Ce param√®tre permet de traiter ces cas pour corriger les √©carts.

---

**Date de r√©solution** : 25 Nov 2025
**Mise √† jour** : 01 Dec 2025
**√âcart r√©siduel accept√©** : 15‚Ç¨
